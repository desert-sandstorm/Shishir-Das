<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Exam Routine</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+Bengali:wght@400;600;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@600;800&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#0f172a;
  --card:#111827;
  --border:#1e293b;
  --text:#e5e7eb;
  --muted:#9ca3af;
  --accent:#3b82f6;
}
.light{
  --bg:#f8fafc;
  --card:#ffffff;
  --border:#e5e7eb;
  --text:#0f172a;
  --muted:#475569;
  --accent:#2563eb;
}

*{box-sizing:border-box}

body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:'Noto Serif Bengali', serif;
  min-height:100vh;
}

/* Watermark */
body::before{
  content:"";
  position:fixed;
  inset:0;
  background:url("https://bogura.polytechedu.com/panel/img/logo.png")
    center/300px no-repeat;
  opacity:.08;
  pointer-events:none;
}

/* Numerals */
.num{font-family:"JetBrains Mono", monospace}

/* Header */
header{
  height:64px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:0 20px;
}
header h1{
  margin:0;
  font-size:22px;
  font-weight:700;
}
.author{
  display:flex;
  gap:8px;
  align-items:center;
  border:1px solid var(--border);
  padding:6px 14px;
  border-radius:999px;
  text-decoration:none;
  color:inherit;
}

/* Top */
.top{
  max-width:1100px;
  margin:20px auto;
  padding:0 18px;
  display:flex;
  gap:16px;
  flex-wrap:wrap;
}
.billboard{
  flex:1;
  background:var(--card);
  border:1px solid var(--border);
  padding:20px;
  border-radius:16px;
  position:relative;
}
.progress{
  position:absolute;
  inset:0;
  background:linear-gradient(90deg,var(--accent),transparent);
  opacity:.15;
  width:0%;
}
.clock{
  font-size:44px;
  font-weight:800;
}
.date{
  margin-top:4px;
  color:var(--muted);
}
.switches{
  display:flex;
  gap:10px;
}
button{
  background:var(--card);
  border:1px solid var(--border);
  padding:10px 16px;
  border-radius:999px;
  color:inherit;
  cursor:pointer;
}

/* Grid */
.container{
  max-width:1100px;
  margin:auto;
  padding:0 18px 40px;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(280px,1fr));
  gap:16px;
}

/* Card */
.card{
  position:relative;
  background:var(--card);
  border:1px solid var(--border);
  border-radius:14px;
  padding:16px;
  display:flex;
  flex-direction:column;
  gap:6px;
  transition:.3s ease;
}
.card:hover,
.card:active{
  transform:scale(1.06);
}
.card.finished{
  opacity:.45;
  filter:grayscale(100%);
  pointer-events:none;
}
.card.next{
  border-color:var(--accent);
}

.serial{
  position:absolute;
  top:10px;
  left:12px;
  font-size:18px;
  color:var(--accent);
}

.subject{
  margin-top:20px;
  font-size:18px;
  font-weight:700;
}
.subject-code{
  font-size:14px;
  font-weight:600;
}
.time-line{
  font-weight:800;
}
.countdown{
  font-weight:700;
  color:var(--accent);
}
</style>
</head>

<body>

<header>
  <h1>üéì Bogura Polytechnic Institute</h1>
  <a class="author" href="https://facebook.com/shishirdas463" target="_blank">
    Shishir Das
  </a>
</header>

<div class="top">
  <div class="billboard">
    <div class="progress" id="progressBar"></div>
    <div class="clock num" id="clock"></div>
    <div class="date" id="today"></div>
  </div>
  <div class="switches">
    <button onclick="toggleLang()">üåê EN / BN</button>
    <button onclick="toggleTheme()">üåô</button>
  </div>
</div>

<div class="container" id="cards"></div>

<script src="dates.js"></script>

<script>
let bangla = false;
let dark = true;

const bnDays = ["‡¶∞‡¶¨‡¶ø‡¶¨‡¶æ‡¶∞","‡¶∏‡ßã‡¶Æ‡¶¨‡¶æ‡¶∞","‡¶Æ‡¶ô‡ßç‡¶ó‡¶≤‡¶¨‡¶æ‡¶∞","‡¶¨‡ßÅ‡¶ß‡¶¨‡¶æ‡¶∞","‡¶¨‡ßÉ‡¶π‡¶∏‡ßç‡¶™‡¶§‡¶ø‡¶¨‡¶æ‡¶∞","‡¶∂‡ßÅ‡¶ï‡ßç‡¶∞‡¶¨‡¶æ‡¶∞","‡¶∂‡¶®‡¶ø‡¶¨‡¶æ‡¶∞"];
const bnMonths = ["‡¶ú‡¶æ‡¶®‡ßÅ‡¶Ø‡¶º‡¶æ‡¶∞‡¶ø","‡¶´‡ßá‡¶¨‡ßç‡¶∞‡ßÅ‡¶Ø‡¶º‡¶æ‡¶∞‡¶ø","‡¶Æ‡¶æ‡¶∞‡ßç‡¶ö","‡¶è‡¶™‡ßç‡¶∞‡¶ø‡¶≤","‡¶Æ‡ßá","‡¶ú‡ßÅ‡¶®","‡¶ú‡ßÅ‡¶≤‡¶æ‡¶á","‡¶Ü‡¶ó‡¶∏‡ßç‡¶ü","‡¶∏‡ßá‡¶™‡ßç‡¶ü‡ßá‡¶Æ‡ßç‡¶¨‡¶∞","‡¶Ö‡¶ï‡ßç‡¶ü‡ßã‡¶¨‡¶∞","‡¶®‡¶≠‡ßá‡¶Æ‡ßç‡¶¨‡¶∞","‡¶°‡¶ø‡¶∏‡ßá‡¶Æ‡ßç‡¶¨‡¶∞"];

function bdNow(){
  return new Date(
    new Date().toLocaleString("en-US",{ timeZone:"Asia/Dhaka" })
  );
}

function unit(n, en, bn){
  if(n <= 0) return "";
  return bangla ? `${n} ${bn}` : `${n} ${en}${n === 1 ? "" : "s"}`;
}

function countdown(time){
  const now = bdNow();
  const diff = new Date(time) - now;

  if(diff <= 0){
    return bangla ? "‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶∂‡ßá‡¶∑" : "EXAM IS OVER";
  }

  const totalMinutes = Math.floor(diff / 60000);
  const days = Math.floor(totalMinutes / 1440);
  const hours = Math.floor((totalMinutes % 1440) / 60);
  const minutes = totalMinutes % 60;

  let emoji = "üü©";
  if(days < 2) emoji = "‚ö†Ô∏è";
  else if(days < 5) emoji = "üî¥";

  const parts = [
    unit(days,"Day","‡¶¶‡¶ø‡¶®"),
    unit(hours,"Hour","‡¶ò‡¶£‡ßç‡¶ü‡¶æ"),
    unit(minutes,"Minute","‡¶Æ‡¶ø‡¶®‡¶ø‡¶ü")
  ].filter(Boolean);

  return bangla
    ? `${emoji} ${parts.join(" ")} ‡¶¨‡¶æ‡¶ï‡¶ø`
    : `${emoji} ${parts.join(" ")} Left`;
}

function formatDate(d){
  if(!bangla){
    return d.toLocaleDateString("en-US",{
      timeZone:"Asia/Dhaka",
      weekday:"long",
      year:"numeric",
      month:"long",
      day:"numeric"
    });
  }
  return `${bnDays[d.getDay()]}, ${bnMonths[d.getMonth()]} ${d.getDate()}, ${d.getFullYear()}`;
}

function render(){
  document.body.classList.toggle("light", !dark);

  const now = bdNow();
  clock.innerHTML = now.toLocaleTimeString("en-US",{
    timeZone:"Asia/Dhaka",
    hour:"numeric",
    minute:"2-digit",
    second:"2-digit",
    hour12:true
  }) + " BST";

  today.textContent = formatDate(now);

  cards.innerHTML = "";
  EXAMS.sort((a,b)=>new Date(a[3]) - new Date(b[3]));

  let next = false;
  let finished = 0;

  EXAMS.forEach(([en,bn,code,time],i)=>{
    const start = new Date(time);
    const end = new Date(start.getTime()+7200000);

    const c = document.createElement("div");
    c.className = "card";

    if(now >= end){
      c.classList.add("finished");
      finished++;
    }
    if(!next && now < start){
      c.classList.add("next");
      next = true;
    }

    c.innerHTML = `
      <div class="serial num">${i+1}</div>
      <div class="subject">${bangla?bn:en}</div>
      <div class="subject-code num">${code}</div>
      <div>${formatDate(start)}</div>
      <div class="time-line num">
        ${start.toLocaleTimeString("en-US",{
          timeZone:"Asia/Dhaka",
          hour:"numeric",
          minute:"2-digit",
          hour12:true
        })} BST
      </div>
      <div class="countdown num">${countdown(time)}</div>
    `;
    cards.appendChild(c);
  });

  progressBar.style.width = Math.round(finished/EXAMS.length*100) + "%";
}

function toggleLang(){ bangla = !bangla; render(); }
function toggleTheme(){ dark = !dark; render(); }

render();
setInterval(render, 1000);
</script>

<script src="addons.js" defer></script>
</body>
</html>
